{% extends "base.html" %}

{% block content %}

<h1>Salidas</h1>

<table class="tabla_agentes table table-responsive" id="tablacarnet3">
    <thead>
        <tr>
            <th>ID</th>
            <th>fecha</th>
            <th>hora</th>
            <th>Número de Móvil</th>
            <th>Agente a Cargo</th>
            <th>Agente Chofer</th>
            <th>Dotación</th>
            <th>Zona</th>
            <th>Handys</th>
            <th>Gorgi</th>
            <th>Pulasky</th>
            <th>Pala</th>
            <th>Mclood</th>
            <th>Derqui</th>
            <th>Bidón de Nafta</th>
            <th>Bolsa de Rescate</th>
            <th>Torpedo</th>
            <th>Tabla</th>
            <th>Conos</th>
            <th>Sopladora</th>
            <th>Cajón</th>
            <th>Chaleco</th>
            <th>Odómetro</th>
            <th>Bolsos de Trauma</th>
            <th>Mat. adicional</th>
            <th>Acciones</th> <!-- Nueva columna para el botón -->
        </tr>
    </thead>
    <tbody>
        {% for salida in salidas %}
        <tr>
            <td>{{ salida.id }}</td>
                <td>{{ salida.fecha }}</td>
                <td>{{ salida.hora }}</td>
                <td>{{ salida.nmovil }}</td>
                <td>{{ salida.ag_cargo }}</td>
                <td>{{ salida.ag_chofer }}</td>
                <td>{{ salida.dotacion }}</td>
                <td>{{ salida.zona }}</td>
                <td>{{ salida.handys }}</td>
                <td>{{ salida.gorgi }}</td>
                <td>{{ salida.pulasky }}</td>
                <td>{{ salida.pala }}</td>
                <td>{{ salida.mclood }}</td>
                <td>{{ salida.derqui }}</td>
                <td>{{ salida.bidon_nafta }}</td>
                <td>{{ salida.bolsa_rescate }}</td>
                <td>{{ salida.torpedo }}</td>
                <td>{{ salida.tabla }}</td>
                <td>{{ salida.conos }}</td>
                <td>{{ salida.sopladora }}</td>
                <td>{{ salida.cajon }}</td>
                <td>{{ salida.chaleco }}</td>
                <td>{{ salida.odometro }}</td>
                <td>{{ salida.bolsos_trauma }}</td>
                <td>{{ salida.herramienta_adicional }}</td>
            <td>
                <button class="btn btn-primary copiar-boton"
                        data-hora="{{ salida.hora }}"
                        data-nmovil="{{ salida.nmovil }}"
                        data-ag_cargo="{{ salida.ag_cargo }}"
                        data-ag_chofer="{{ salida.ag_chofer }}"
                        data-dotacion="{{ salida.dotacion }}"
                        data-zona="{{ salida.zona }}"
                        data-odometro="{{ salida.odometro }}">
                    Copiar
                </button>
            </td>
        </tr>
        {% endfor %}
    </tbody>
</table>

<script>
    document.querySelectorAll('.copiar-boton').forEach(button => {
        button.addEventListener('click', function () {
            const hora = this.getAttribute('data-hora');
            const nmovil = this.getAttribute('data-nmovil');
            const agCargo = this.getAttribute('data-ag_cargo');
            const agChofer = this.getAttribute('data-ag_chofer');
            const dotacion = this.getAttribute('data-dotacion');
            const zona = this.getAttribute('data-zona');
            const odometro = this.getAttribute('data-odometro');

            const formato = `
                ETAC BASE ALTA GRACIA
                Horario de salida: ${hora}
                MOVIL: ${nmovil}
                A CARGO: ${agCargo}
                CHOFER: ${agChofer}
                DOTACIÓN: ${dotacion}
                MOTIVO: ${zona}
                Odometro: ${odometro}
            `;

            // Copiar al portapapeles
            navigator.clipboard.writeText(formato.trim()).then(() => {
                alert('Información copiada al portapapeles');
            }).catch(err => {
                alert('Hubo un error al copiar la información: ', err);
            });
        });
    });
</script>

{% endblock %}
